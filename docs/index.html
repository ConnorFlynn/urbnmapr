<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>State and county shapefiles in tibble format â€¢ urbnmapr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="State and county shapefiles in tibble format">
<meta property="og:description" content="Provides state and county shapefiles in 'tibble' format that is 
    compatible to map with 'ggplot2'. Shapefiles include Alaska and Hawaii, 
    transformed to be displayed as insets within the continental United States.
    Heavily inspired by and derived in part from the fiftystater 
    package &lt;https://cran.r-project.org/package=fiftystater&gt; by William Murphy.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">urbnmapr</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/introducing-urbnmapr.html">Introducing urbnmapr</a>
    </li>
    <li>
      <a href="articles/start-to-finish.html">Start to finish</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/UrbanInstitute/urbnmapr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="urbnmapr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#urbnmapr" class="anchor"></a>urbnmapr <img src="reference/figures/hexsticker.png" align="right" style="width:138.1334px;height:160px;">
</h1></div>

<p>The <code>urbnmapr</code> package provides state and county shapefiles in <code>tibble</code> format that is compatible to map with <code>ggplot2</code>.</p>
<p>Shapefiles include Alaska and Hawaii, transformed to be displayed as insets within the continental United States.</p>
<p>This package is heavily inspired by and derived in part from the <a href="https://cran.r-project.org/package=fiftystater">fiftystater package</a> by William Murphy. In contrast, <code>urbnmapr</code>:</p>
<ul>
<li>Uses shapefiles from the US Census Bureau</li>
<li>Converts the shapefile data to a <code>tibble</code> dataframe</li>
<li>Adds various identifiers for merging</li>
<li>Includes a county-level shapefile</li>
</ul>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the latest version of <code>urbnmapr</code> from GitHub:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>
devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"UrbanInstitute/urbnmapr"</span>)</code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<div id="quick-maps" class="section level3">
<h3 class="hasAnchor">
<a href="#quick-maps" class="anchor"></a>Quick maps</h3>
<p><code>urbnmapr</code> contains two <code>tibble</code> dataframes for creating maps:</p>
<ul>
<li><code>states</code></li>
<li><code>counties</code></li>
</ul>
<p>The <code>states</code> and <code>counties</code> tibbles can be used with <code>geom_polygon()</code> and <code>coord_map()</code> to create base maps of the continental United States, with Alaska and Hawaii displayed as insets:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(urbnmapr)

states <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(long, lat, <span class="dt">group =</span> group)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_polygon</span>(<span class="dt">fill =</span> <span class="st">"grey"</span>, <span class="dt">color =</span> <span class="st">"#ffffff"</span>, <span class="dt">size =</span> <span class="fl">0.25</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_map</span>(<span class="dt">projection =</span> <span class="st">"albers"</span>, <span class="dt">lat0 =</span> <span class="dv">39</span>, <span class="dt">lat1 =</span> <span class="dv">45</span>)</code></pre></div>
<p><img src="index_files/figure-html/blank-state-1.png" width="700"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">counties <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(long, lat, <span class="dt">group =</span> group)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_polygon</span>(<span class="dt">fill =</span> <span class="st">"grey"</span>, <span class="dt">color =</span> <span class="st">"#ffffff"</span>, <span class="dt">size =</span> <span class="fl">0.05</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_map</span>(<span class="dt">projection =</span> <span class="st">"albers"</span>, <span class="dt">lat0 =</span> <span class="dv">39</span>, <span class="dt">lat1 =</span> <span class="dv">45</span>)</code></pre></div>
<p><img src="index_files/figure-html/blank-county-1.png" width="700"></p>
</div>
<div id="more-maps" class="section level3">
<h3 class="hasAnchor">
<a href="#more-maps" class="anchor"></a>More maps</h3>
<p>Additional maps can be accessed with <code><a href="reference/get_urbn_map.html">get_urbn_map()</a></code>. Use the function to create a tibble in your global environment and then map using the same syntax as above.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">territories_counties &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_urbn_map.html">get_urbn_map</a></span>(<span class="dt">map =</span> <span class="st">"territories_counties"</span>)

territories_counties <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(long, lat, <span class="dt">group =</span> group)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_polygon</span>(<span class="dt">fill =</span> <span class="st">"grey"</span>, <span class="dt">color =</span> <span class="st">"#ffffff"</span>, <span class="dt">size =</span> <span class="fl">0.05</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_map</span>(<span class="dt">projection =</span> <span class="st">"albers"</span>, <span class="dt">lat0 =</span> <span class="dv">39</span>, <span class="dt">lat1 =</span> <span class="dv">45</span>)</code></pre></div>
<p><img src="index_files/figure-html/get_urbn_map-1.png" width="700"></p>
</div>
<div id="labels" class="section level3">
<h3 class="hasAnchor">
<a href="#labels" class="anchor"></a>Labels</h3>
<p>Labels for all maps can be accessed with <code><a href="reference/get_urbn_labels.html">get_urbn_labels()</a></code>. Use the function to call the appropriate labels and then label the map with <code>geom_text()</code>. Labels can be called inside of <code>geom_text()</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">states <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_polygon</span>(<span class="kw">aes</span>(long, lat, <span class="dt">group =</span> group), 
               <span class="dt">fill =</span> <span class="st">"grey"</span>, <span class="dt">color =</span> <span class="st">"#ffffff"</span>, <span class="dt">size =</span> <span class="fl">0.25</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_map</span>(<span class="dt">projection =</span> <span class="st">"albers"</span>, <span class="dt">lat0 =</span> <span class="dv">39</span>, <span class="dt">lat1 =</span> <span class="dv">45</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_text</span>(<span class="dt">data =</span> <span class="kw"><a href="reference/get_urbn_labels.html">get_urbn_labels</a></span>(<span class="dt">map =</span> <span class="st">"states"</span>), <span class="kw">aes</span>(<span class="dt">x =</span> long, lat, <span class="dt">label =</span> state_abbv), 
            <span class="dt">size =</span> <span class="dv">3</span>)</code></pre></div>
<p><img src="index_files/figure-html/quick-labels-1.png" width="700"></p>
<p>Or before <code>geom_text()</code> is called:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">territories &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_urbn_map.html">get_urbn_map</a></span>(<span class="dt">map =</span> <span class="st">"territories"</span>)
labels &lt;-<span class="st"> </span><span class="kw"><a href="reference/get_urbn_labels.html">get_urbn_labels</a></span>(<span class="dt">map =</span> <span class="st">"territories"</span>)

territories <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>() <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_polygon</span>(<span class="kw">aes</span>(long, lat, <span class="dt">group =</span> group),
               <span class="dt">fill =</span> <span class="st">"grey"</span>, <span class="dt">color =</span> <span class="st">"#ffffff"</span>, <span class="dt">size =</span> <span class="fl">0.05</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_map</span>(<span class="dt">projection =</span> <span class="st">"albers"</span>, <span class="dt">lat0 =</span> <span class="dv">39</span>, <span class="dt">lat1 =</span> <span class="dv">45</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_text</span>(<span class="dt">data =</span> labels, <span class="kw">aes</span>(<span class="dt">x =</span> long, lat, <span class="dt">label =</span> state_abbv), <span class="dt">size =</span> <span class="dv">3</span>) </code></pre></div>
<p><img src="index_files/figure-html/get_urbn_labels-1.png" width="700"></p>
</div>
</div>
<div id="merging-data" class="section level2">
<h2 class="hasAnchor">
<a href="#merging-data" class="anchor"></a>Merging Data</h2>
<p>The <code>states</code> and <code>counties</code> tibbles include various identifiers to simplify merging data. The states <code>states</code> tibble contains <code>state_fips</code>, <code>state_abbv</code>, and <code>state_name</code>. The <code>counties</code> tibble contains <code>county_fips</code>, <code>state_abbv</code>, <code>state_fips</code>, <code>county_name</code>, and <code>state_name</code>. Both tibbles can be piped into <code>ggplot2</code> to create a choropleth map.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">statedata <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">left_join</span>(states, <span class="dt">by =</span> <span class="st">"state_name"</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(long, lat, <span class="dt">group =</span> group, <span class="dt">fill =</span> horate)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_polygon</span>(<span class="dt">color =</span> <span class="st">"#ffffff"</span>, <span class="dt">size =</span> .<span class="dv">25</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_map</span>(<span class="dt">projection =</span> <span class="st">"albers"</span>, <span class="dt">lat0 =</span> <span class="dv">39</span>, <span class="dt">lat1 =</span> <span class="dv">45</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">fill =</span> <span class="st">"Homeownership rate"</span>)</code></pre></div>
<p><img src="index_files/figure-html/us-choropleth-1.png" width="700"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">household_data &lt;-<span class="st"> </span><span class="kw">left_join</span>(countydata, counties, <span class="dt">by =</span> <span class="st">"county_fips"</span>) 

household_data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(long, lat, <span class="dt">group =</span> group, <span class="dt">fill =</span> medhhincome)) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_polygon</span>(<span class="dt">color =</span> <span class="st">"#ffffff"</span>, <span class="dt">size =</span> <span class="fl">0.05</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">coord_map</span>(<span class="dt">projection =</span> <span class="st">"albers"</span>, <span class="dt">lat0 =</span> <span class="dv">39</span>, <span class="dt">lat1 =</span> <span class="dv">45</span>)</code></pre></div>
<p><img src="index_files/figure-html/county-1.png" width="700"></p>
</div>
<div id="styles" class="section level2">
<h2 class="hasAnchor">
<a href="#styles" class="anchor"></a>Styles</h2>
<p><code>library(urbnmapr)</code> works well with the <a href="https://github.com/UrbanInstitute/urban_R_theme">Urban Institute <code>ggplot2</code> theme.</a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(urbnthemes)

<span class="kw"><a href="http://www.rdocumentation.org/packages/urbnthemes/topics/set_urbn_defaults">set_urbn_defaults</a></span>(<span class="dt">style =</span> <span class="st">"map"</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">statedata <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">left_join</span>(states, <span class="dt">by =</span> <span class="st">"state_name"</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(long, lat, <span class="dt">group =</span> group, <span class="dt">fill =</span> horate)) <span class="op">+</span>
<span class="st">  </span><span class="kw">geom_polygon</span>(<span class="dt">color =</span> <span class="st">"#ffffff"</span>, <span class="dt">size =</span> .<span class="dv">25</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">coord_map</span>(<span class="dt">projection =</span> <span class="st">"albers"</span>, <span class="dt">lat0 =</span> <span class="dv">39</span>, <span class="dt">lat1 =</span> <span class="dv">45</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw"><a href="http://www.rdocumentation.org/packages/urbnthemes/topics/scale_fill_gradientn">scale_fill_gradientn</a></span>(<span class="dt">labels =</span> scales<span class="op">::</span>percent) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">fill =</span> <span class="st">"Homeownership rate"</span>)</code></pre></div>
<p><img src="index_files/figure-html/theme-state-1.png" width="700"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">household_data <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(state_name <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">"Virginia"</span>, <span class="st">"Maryland"</span>, <span class="st">"District of Columbia"</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(long, lat, <span class="dt">group =</span> group, <span class="dt">fill =</span> medhhincome)) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_polygon</span>(<span class="dt">color =</span> <span class="st">"#ffffff"</span>, <span class="dt">size =</span> <span class="fl">0.05</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">coord_map</span>(<span class="dt">projection =</span> <span class="st">"albers"</span>, <span class="dt">lat0 =</span> <span class="dv">39</span>, <span class="dt">lat1 =</span> <span class="dv">45</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw"><a href="http://www.rdocumentation.org/packages/urbnthemes/topics/scale_fill_gradientn">scale_fill_gradientn</a></span>(<span class="dt">labels =</span> scales<span class="op">::</span>dollar) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">fill =</span> <span class="st">"Median household income"</span>)</code></pre></div>
<p><img src="index_files/figure-html/theme-counties-1.png" width="700"></p>
</div>
<div id="license" class="section level2">
<h2 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h2>
<p>Code released under the GNU General Public License v3.0.</p>
</div>
<div id="code-of-conduct" class="section level2">
<h2 class="hasAnchor">
<a href="#code-of-conduct" class="anchor"></a>Code of conduct</h2>
<p>Please note that this project is released with a <a href="CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/UrbanInstitute/urbnmapr">https://â€‹github.com/â€‹UrbanInstitute/â€‹urbnmapr</a>
</li>
<li>Report a bug at <br><a href="https://github.com/UrbanInstitute/urbnmapr/issues">https://â€‹github.com/â€‹UrbanInstitute/â€‹urbnmapr/â€‹issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Sarah Strochak <br><small class="roles"> Author, maintainer </small>  </li>
<li>Kyle Ueyama <br><small class="roles"> Author </small>  </li>
<li>Aaron Williams <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/UrbanInstitute/urbnmapr"><img src="https://travis-ci.org/UrbanInstitute/urbnmapr.svg?branch=master" alt="Travis-CI Build Status"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Sarah Strochak, Kyle Ueyama, Aaron Williams.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
